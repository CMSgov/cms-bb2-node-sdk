<!DOCTYPE html>
<html class="default">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="IE=edge" />
    <title>cms-bluebutton-sdk</title>
    <meta name="description" content="Documentation for cms-bluebutton-sdk" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="assets/style.css" />
    <link rel="stylesheet" href="assets/highlight.css" />
    <script async src="assets/search.js" id="search-script"></script>
  </head>
  <body>
    <script>
      document.body.classList.add(localStorage.getItem("tsd-theme") || "os");
    </script>
    <header>
      <div class="tsd-page-toolbar">
        <div class="container">
          <div class="table-wrap">
            <div class="table-cell" id="tsd-search" data-base=".">
              <div class="field">
                <label
                  for="tsd-search-field"
                  class="tsd-widget search no-caption"
                  >Search</label
                ><input type="text" id="tsd-search-field" />
              </div>
              <ul class="results">
                <li class="state loading">Preparing search index...</li>
                <li class="state failure">The search index is not available</li>
              </ul>
              <a href="index.html" class="title">cms-bluebutton-sdk</a>
            </div>
            <div class="table-cell" id="tsd-widgets">
              <div id="tsd-filter">
                <a
                  href="#"
                  class="tsd-widget options no-caption"
                  data-toggle="options"
                  >Options</a
                >
                <div class="tsd-filter-group">
                  <div class="tsd-select" id="tsd-filter-visibility">
                    <span class="tsd-select-label">All</span>
                    <ul class="tsd-select-list">
                      <li data-value="public">Public</li>
                      <li data-value="protected">Public/Protected</li>
                      <li data-value="private" class="selected">All</li>
                    </ul>
                  </div>
                  <input
                    type="checkbox"
                    id="tsd-filter-inherited"
                    checked
                  /><label class="tsd-widget" for="tsd-filter-inherited"
                    >Inherited</label
                  ><input
                    type="checkbox"
                    id="tsd-filter-externals"
                    checked
                  /><label class="tsd-widget" for="tsd-filter-externals"
                    >Externals</label
                  >
                </div>
              </div>
              <a href="#" class="tsd-widget menu no-caption" data-toggle="menu"
                >Menu</a
              >
            </div>
          </div>
        </div>
      </div>
      <div class="tsd-page-title">
        <div class="container"><h1>cms-bluebutton-sdk</h1></div>
      </div>
    </header>
    <div class="container container-main">
      <div class="row">
        <div class="col-8 col-content">
          <div class="tsd-panel tsd-typography">
            <a
              href="#blue-button-api-sdk"
              id="blue-button-api-sdk"
              style="color: inherit; text-decoration: none"
            >
              <h1>Blue Button API SDK</h1>
            </a>

            <a
              href="#table-of-contents"
              id="table-of-contents"
              style="color: inherit; text-decoration: none"
            >
              <h1>Table of contents</h1>
            </a>
            <ol>
              <li><a href="#description">Descritpion</a></li>
              <li><a href="#installation">Installation</a></li>
              <li><a href="#configuration">Configuration</a></li>
              <li>
                <a href="#usages"
                  >Usages: Obtain Access Grant, Probe Scope, and Access Data</a
                >
              </li>
              <li><a href="#samples">A Complete Sample App</a></li>
              <li>
                <a href="#versions_and_environments"
                  >API Versions and Environments</a
                >
              </li>
            </ol>

            <a
              href="#description-"
              id="description-"
              style="color: inherit; text-decoration: none"
            >
              <h2>Description <a name="description"></a></h2>
            </a>
            <p>
              This is an SDK for interacting with
              <a href="https://bluebutton.cms.gov/developers/"
                >CMS Blue Button 2.0 API</a
              >, the API allows applications to obtain a beneficiary&#39;s (who
              has login account with medicare.gov) grant to access his/her
              medicare claims data - through OAUTH2
              <a href="https://datatracker.ietf.org/doc/html/rfc6749"
                >(RFC 6749)</a
              >
              authorization flow.
            </p>
            <p>
              By using the SDK, the development of applications accessing Blue
              Button 2.0 API can be greatly simplified.
            </p>
            <p>
              Note, following the OAUTH2 best practices, OAUTH2 PKCE etension
              <a href="https://datatracker.ietf.org/doc/html/rfc7636"
                >(RFC 7636)</a
              >
              is always enabled.
            </p>

            <a
              href="#installation-"
              id="installation-"
              style="color: inherit; text-decoration: none"
            >
              <h2>Installation <a name="installation"></a></h2>
            </a>
            <p>Using npm:</p>
            <pre><code class="language-bash"><span class="hl-0">$ npm install cms-bluebutton-sdk</span>
</code></pre>
            <p>When develop with typescript</p>
            <pre><code class="language-bash"><span class="hl-0">$ npm install --save-dev @types/cms-bluebutton-sdk</span>
</code></pre>
            <p>Using yarn:</p>
            <pre><code class="language-bash"><span class="hl-0">$ yarn add cms-bluebutton-sdk</span>
</code></pre>
            <p>When develop with typescript</p>
            <pre><code class="language-bash"><span class="hl-0">$ yarn add --dev @types/cms-bluebutton-sdk</span>
</code></pre>

            <a
              href="#configuration-"
              id="configuration-"
              style="color: inherit; text-decoration: none"
            >
              <h2>Configuration <a name="configuration"></a></h2>
            </a>
            <p>
              the SDK needs to be properly configured to work, the parameters
              are:
            </p>
            <ul>
              <li>the app&#39;s credentials - client id, client secret</li>
              <li>the app&#39;s callback url</li>
              <li>the version number of the API</li>
              <li>
                the app&#39;s environment (web location where the app is
                registered)
              </li>
            </ul>
            <p>
              the configuration is in json format and stored in a local file,
              the default location is current working directory with file name:
              .bluebutton-config.json
            </p>
            <p>A sample configuration json:</p>
            <pre><code><span class="hl-0">{</span><br/><span class="hl-0">  </span><span class="hl-1">&quot;clientId&quot;</span><span class="hl-0">: </span><span class="hl-1">&quot;foo&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-1">&quot;clientSecret&quot;</span><span class="hl-0">: </span><span class="hl-1">&quot;bar&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-1">&quot;callbackUrl&quot;</span><span class="hl-0">: </span><span class="hl-1">&quot;https://www.fake.com/&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-1">&quot;retrySettings&quot;</span><span class="hl-0">: {</span><br/><span class="hl-0">    </span><span class="hl-1">&quot;initInterval&quot;</span><span class="hl-2">:</span><span class="hl-0"> </span><span class="hl-3">8000</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">&quot;maxAttempts&quot;</span><span class="hl-2">:</span><span class="hl-0"> </span><span class="hl-3">5</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">&quot;retryableCodes&quot;</span><span class="hl-2">:</span><span class="hl-0"> [</span><span class="hl-3">500</span><span class="hl-0">, </span><span class="hl-3">502</span><span class="hl-0">, </span><span class="hl-3">503</span><span class="hl-0">, </span><span class="hl-3">504</span><span class="hl-0">]</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">}</span><br/>
</code></pre>
            <p>
              OAUTH2.0 parameters: clientId, clientSecret, callbackUrl, they are
              mandatory and must be provided
            </p>
            <table>
              <thead>
                <tr>
                  <th>parameter</th>
                  <th>value</th>
                  <th>Comments</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>clientId</td>
                  <td>&quot;foo&quot;</td>
                  <td>oauth2 client id of the app</td>
                </tr>
                <tr>
                  <td>clientSecret</td>
                  <td>&quot;bar&quot;</td>
                  <td>oauth2 client secret of the app</td>
                </tr>
                <tr>
                  <td>callbackUrl</td>
                  <td>
                    &quot;<a href='https://www.fake.com/"'
                      >https://www.fake.com/&quot;</a
                    >
                  </td>
                  <td>oauth2 callback url of the app</td>
                </tr>
              </tbody>
            </table>
            <p>
              For application registration and client id and client secret,
              please refer to:
              <a href="https://bluebutton.cms.gov/developers/#try-the-api"
                >Blue Button 2.0 API Docs - Try the API</a
              >
            </p>
            <p>FHIR requests retry parameters:</p>
            <p>
              retrySettings (Optional), parameters for exponential back off
              retry algorithm
            </p>
            <table>
              <thead>
                <tr>
                  <th>retry parameter</th>
                  <th>value (default)</th>
                  <th>Comments</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>initInterval</td>
                  <td>5000</td>
                  <td>back off interval in milli sec</td>
                </tr>
                <tr>
                  <td>maxAttempts</td>
                  <td>3</td>
                  <td>max retry attempts</td>
                </tr>
                <tr>
                  <td>retryableCodes</td>
                  <td>[500, 502, 503, 504]</td>
                  <td>error response codes to retry on</td>
                </tr>
              </tbody>
            </table>
            <p>
              the exponential back off retry intervals are calculated by below
              formular, where i starts from 0:
            </p>
            <p>initInterval * 2 ** i</p>

            <a
              href="#sample-usages-obtain-access-grant-probe-scope-and-access-data-"
              id="sample-usages-obtain-access-grant-probe-scope-and-access-data-"
              style="color: inherit; text-decoration: none"
            >
              <h2>
                Sample Usages: Obtain Access Grant, Probe Scope, and Access Data
                <a name="usages"></a>
              </h2>
            </a>
            <p>
              Below are psuedo code snippets showing SDK used with node express
              server.
            </p>
            <pre><code><br/><span class="hl-4">import</span><span class="hl-0"> </span><span class="hl-2">express</span><span class="hl-0">, { </span><span class="hl-2">Request</span><span class="hl-0">, </span><span class="hl-2">Response</span><span class="hl-0"> } </span><span class="hl-4">from</span><span class="hl-0"> </span><span class="hl-1">&#39;express&#39;</span><span class="hl-0">;</span><br/><span class="hl-4">import</span><span class="hl-0"> </span><span class="hl-2">BlueButton</span><span class="hl-0"> </span><span class="hl-4">from</span><span class="hl-0"> </span><span class="hl-1">&#39;cms-bluebutton-sdk&#39;</span><span class="hl-0">;</span><br/><span class="hl-4">import</span><span class="hl-0"> { </span><span class="hl-2">AuthorizationToken</span><span class="hl-0"> } </span><span class="hl-4">from</span><span class="hl-0"> </span><span class="hl-1">&#39;cms-bluebutton-sdk&#39;</span><span class="hl-0">;</span><br/><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">app</span><span class="hl-0"> = </span><span class="hl-7">express</span><span class="hl-0">();</span><br/><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">bb</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-7">BlueButton</span><span class="hl-0">();</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">authData</span><span class="hl-0"> = </span><span class="hl-2">bb</span><span class="hl-0">.</span><span class="hl-7">generateAuthData</span><span class="hl-0">();</span><br/><br/><span class="hl-8">// AuthorizationToken holds access grant info:</span><br/><span class="hl-8">// access token, expire in, expire at, token type, scope, refreh token, etc.</span><br/><span class="hl-8">// it is associated with current logged in user in real app,</span><br/><span class="hl-8">// check SDK js docs for more details.</span><br/><br/><span class="hl-5">let</span><span class="hl-0"> </span><span class="hl-2">authToken</span><span class="hl-0">: </span><span class="hl-9">AuthorizationToken</span><span class="hl-0">;</span><br/><br/><span class="hl-8">// start authorize flow: response with URL to redirect to Medicare.gov beneficiary login</span><br/><span class="hl-2">app</span><span class="hl-0">.</span><span class="hl-7">get</span><span class="hl-0">(</span><span class="hl-1">&#39;/&#39;</span><span class="hl-0">, (</span><span class="hl-2">req</span><span class="hl-0">, </span><span class="hl-2">res</span><span class="hl-0">) </span><span class="hl-5">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">redirectUrl</span><span class="hl-0"> = </span><span class="hl-2">bb</span><span class="hl-0">.</span><span class="hl-7">generateAuthorizeUrl</span><span class="hl-0">(</span><span class="hl-2">authData</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-2">res</span><span class="hl-0">.</span><span class="hl-7">redirect</span><span class="hl-0">(</span><span class="hl-2">redirectUrl</span><span class="hl-0">);</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-8">// oauth2 call back: obtain access token, optionally check scope, and fetch data</span><br/><span class="hl-2">app</span><span class="hl-0">.</span><span class="hl-7">get</span><span class="hl-0">(</span><span class="hl-1">&#39;api/bluebutton/callback&#39;</span><span class="hl-0">, </span><span class="hl-5">async</span><span class="hl-0"> (</span><span class="hl-2">req</span><span class="hl-0">: </span><span class="hl-9">Request</span><span class="hl-0">, </span><span class="hl-2">res</span><span class="hl-0">: </span><span class="hl-9">Response</span><span class="hl-0">) </span><span class="hl-5">=&gt;</span><span class="hl-0"> {</span><br/><br/><span class="hl-0">  </span><span class="hl-5">let</span><span class="hl-0"> </span><span class="hl-2">results</span><span class="hl-0"> = {};</span><br/><span class="hl-0">    </span><span class="hl-4">try</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-2">authToken</span><span class="hl-0"> = </span><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-2">bb</span><span class="hl-0">.</span><span class="hl-7">getAuthorizationToken</span><span class="hl-0">(</span><span class="hl-2">authData</span><span class="hl-0">, </span><span class="hl-2">req</span><span class="hl-0">.</span><span class="hl-2">query</span><span class="hl-0">.</span><span class="hl-2">code</span><span class="hl-0">, </span><span class="hl-2">req</span><span class="hl-0">.</span><span class="hl-2">query</span><span class="hl-0">.</span><span class="hl-2">state</span><span class="hl-0">, </span><span class="hl-2">req</span><span class="hl-0">.</span><span class="hl-2">query</span><span class="hl-0">.</span><span class="hl-2">error</span><span class="hl-0">);</span><br/><span class="hl-0">        </span><span class="hl-8">// now access token obtained, note, during authorization, the beneficiary can grant</span><br/><span class="hl-0">        </span><span class="hl-8">// access to his/her demographic data and claims data or only claims data, check the scope</span><br/><span class="hl-0">        </span><span class="hl-8">// of the current access token as shown below:</span><br/><span class="hl-0">        </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">scopes</span><span class="hl-0">: </span><span class="hl-9">string</span><span class="hl-0">[] = </span><span class="hl-2">authToken</span><span class="hl-0">.</span><span class="hl-2">scope</span><span class="hl-0">;</span><br/><span class="hl-0">        </span><span class="hl-8">// iterate scope entries here or check if a permission is in the scope</span><br/><span class="hl-0">        </span><span class="hl-4">if</span><span class="hl-0"> (</span><span class="hl-2">authToken</span><span class="hl-0">.</span><span class="hl-2">scope</span><span class="hl-0">.</span><span class="hl-7">index</span><span class="hl-0">(</span><span class="hl-1">&quot;patient/Patient.read&quot;</span><span class="hl-0">) &gt; -</span><span class="hl-3">1</span><span class="hl-0">) {</span><br/><span class="hl-0">            </span><span class="hl-8">// patient info access granted</span><br/><span class="hl-0">        }</span><br/><br/><span class="hl-0">        </span><span class="hl-8">/**</span><br/><span class="hl-8">        * 1. access token scope where demagraphic info included:</span><br/><span class="hl-8">        *</span><br/><span class="hl-8">        * scope: [</span><br/><span class="hl-8">        * &quot;patient/Coverage.read&quot;,</span><br/><span class="hl-8">        * &quot;patient/ExplanationOfBenefit.read&quot;,</span><br/><span class="hl-8">        * &quot;patient/Patient.read&quot;,</span><br/><span class="hl-8">        * &quot;profile&quot;,</span><br/><span class="hl-8">        * ]</span><br/><span class="hl-8">        *</span><br/><span class="hl-8">        * 2. access token scope where demagraphic info not included:</span><br/><span class="hl-8">        *</span><br/><span class="hl-8">        * scope: [</span><br/><span class="hl-8">        * &quot;patient/Coverage.read&quot;,</span><br/><span class="hl-8">        * &quot;patient/ExplanationOfBenefit.read&quot;,</span><br/><span class="hl-8">        * ]</span><br/><span class="hl-8">        */</span><br/><br/><span class="hl-0">        </span><span class="hl-8">// data flow: after access granted</span><br/><span class="hl-0">        </span><span class="hl-8">// the app logic can fetch the beneficiary&#39;s data in app specific ways:</span><br/><span class="hl-0">        </span><span class="hl-8">// e.g. download EOB periodically etc.</span><br/><br/><span class="hl-0">        </span><span class="hl-8">// Access token kept in var authToken can expire, SDK fhir call (e.g. getExplanationOfBenefitData)</span><br/><span class="hl-0">        </span><span class="hl-8">// will detect that and perform token refresh accordingly.</span><br/><br/><span class="hl-0">        </span><span class="hl-8">// Alternatively app logic can call refreshAuthToken to perform a token refresh</span><br/><span class="hl-0">        </span><span class="hl-8">// preemptively before the fhir calls:</span><br/><span class="hl-0">        </span><span class="hl-8">// authToken = await bb.refreshAuthToken(authToken);</span><br/><br/><span class="hl-0">        </span><span class="hl-2">eobResults</span><span class="hl-0"> = </span><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-2">bb</span><span class="hl-0">.</span><span class="hl-7">getExplanationOfBenefitData</span><span class="hl-0">(</span><span class="hl-2">authToken</span><span class="hl-0">);</span><br/><span class="hl-0">        </span><span class="hl-8">// Note, below assignment is needed to pass on the auth token in case it got updated during the fhir call</span><br/><span class="hl-0">        </span><span class="hl-2">authToken</span><span class="hl-0"> = </span><span class="hl-2">eobResults</span><span class="hl-0">.</span><span class="hl-2">token</span><span class="hl-0">;</span><br/><br/><span class="hl-0">        </span><span class="hl-2">patientResults</span><span class="hl-0"> = </span><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-2">bb</span><span class="hl-0">.</span><span class="hl-7">getPatientData</span><span class="hl-0">(</span><span class="hl-2">authToken</span><span class="hl-0">);</span><br/><span class="hl-0">        </span><span class="hl-2">authToken</span><span class="hl-0"> = </span><span class="hl-2">patientResults</span><span class="hl-0">.</span><span class="hl-2">token</span><span class="hl-0">;</span><br/><br/><span class="hl-0">        </span><span class="hl-2">coverageResults</span><span class="hl-0"> = </span><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-2">bb</span><span class="hl-0">.</span><span class="hl-7">getCoverageData</span><span class="hl-0">(</span><span class="hl-2">authToken</span><span class="hl-0">);</span><br/><span class="hl-0">        </span><span class="hl-2">authToken</span><span class="hl-0"> = </span><span class="hl-2">coverageResults</span><span class="hl-0">.</span><span class="hl-2">token</span><span class="hl-0">;</span><br/><br/><span class="hl-0">        </span><span class="hl-2">profileResults</span><span class="hl-0"> = </span><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-2">bb</span><span class="hl-0">.</span><span class="hl-7">getProfileData</span><span class="hl-0">(</span><span class="hl-2">authToken</span><span class="hl-0">);</span><br/><span class="hl-0">        </span><span class="hl-2">authToken</span><span class="hl-0"> = </span><span class="hl-2">profileResults</span><span class="hl-0">.</span><span class="hl-2">token</span><span class="hl-0">;</span><br/><br/><span class="hl-0">        </span><span class="hl-8">// Note that above FHIR data calls (getExplanationOfBenefitData/getPatientData/getCoverageData)</span><br/><span class="hl-0">        </span><span class="hl-8">// are sending FHIR search requests to Blue Button 2.0 API, and the data returned is a FHIR resource</span><br/><span class="hl-0">        </span><span class="hl-8">// bundles of the first 10 resources, e.g. if the current beneficiary has 55 ExplanationOfBenefit resources,</span><br/><span class="hl-0">        </span><span class="hl-8">// the call to getExplanationOfBenefitData will return the first 10 of them,</span><br/><span class="hl-0">        </span><span class="hl-8">// to retrive all the ExplanationOfBenefit resources, call getPages as shown below:</span><br/><br/><span class="hl-0">        </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">eobbundle</span><span class="hl-0"> = </span><span class="hl-2">eobResults</span><span class="hl-0">.</span><span class="hl-2">response</span><span class="hl-0">?.</span><span class="hl-2">data</span><span class="hl-0">;</span><br/><span class="hl-0">        </span><span class="hl-8">// getPages will navigate from the bundle (eobbundle) and return a list of all</span><br/><span class="hl-0">        </span><span class="hl-8">// the &#39;pages&#39;</span><br/><span class="hl-0">        </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">eobs</span><span class="hl-0"> = </span><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-2">bb</span><span class="hl-0">.</span><span class="hl-7">getPages</span><span class="hl-0">(</span><span class="hl-2">eobbundle</span><span class="hl-0">, </span><span class="hl-2">authToken</span><span class="hl-0">);</span><br/><span class="hl-0">        </span><span class="hl-8">// this is needed to pass on the auth token in case it got updated during the call</span><br/><span class="hl-0">        </span><span class="hl-2">authToken</span><span class="hl-0"> = </span><span class="hl-2">eobs</span><span class="hl-0">.</span><span class="hl-2">token</span><span class="hl-0">;</span><br/><br/><span class="hl-0">        </span><span class="hl-8">// alternatively, the app can choose more fine grained control of pagination:</span><br/><span class="hl-0">        </span><span class="hl-8">// e.g. fetch 1st page, fetch last page, fetch next page, fetch previous page,</span><br/><span class="hl-0">        </span><span class="hl-8">// as shown by below lines of code:</span><br/><span class="hl-0">        </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">firstPgURL</span><span class="hl-0"> = </span><span class="hl-2">bb</span><span class="hl-0">.</span><span class="hl-7">extractPageNavUrl</span><span class="hl-0">(</span><span class="hl-2">eobbundle</span><span class="hl-0">, </span><span class="hl-1">&quot;first&quot;</span><span class="hl-0">);</span><br/><span class="hl-0">        </span><span class="hl-4">if</span><span class="hl-0"> (</span><span class="hl-2">firstPgURL</span><span class="hl-0">) {</span><br/><span class="hl-0">            </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">fistPage</span><span class="hl-0"> = </span><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">this</span><span class="hl-0">.</span><span class="hl-7">getCustomData</span><span class="hl-0">(</span><span class="hl-2">firstPgURL</span><span class="hl-0">, </span><span class="hl-2">authToken</span><span class="hl-0">);</span><br/><span class="hl-0">            </span><span class="hl-8">// pass on token</span><br/><span class="hl-0">            </span><span class="hl-2">authToken</span><span class="hl-0"> = </span><span class="hl-2">firstPage</span><span class="hl-0">.</span><span class="hl-2">token</span><span class="hl-0">;</span><br/><span class="hl-0">            </span><span class="hl-8">// harvest bundle json</span><br/><span class="hl-0">            </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">firstBundle</span><span class="hl-0"> = </span><span class="hl-2">firstPage</span><span class="hl-0">.</span><span class="hl-2">response</span><span class="hl-0">?.</span><span class="hl-2">data</span><span class="hl-0">;</span><br/><span class="hl-0">        }</span><br/><span class="hl-0">        </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">lastPgURL</span><span class="hl-0"> = </span><span class="hl-2">bb</span><span class="hl-0">.</span><span class="hl-7">extractPageNavUrl</span><span class="hl-0">(</span><span class="hl-2">eobbundle</span><span class="hl-0">, </span><span class="hl-1">&quot;last&quot;</span><span class="hl-0">);</span><br/><span class="hl-0">        </span><span class="hl-4">if</span><span class="hl-0"> (</span><span class="hl-2">lastPgURL</span><span class="hl-0">) {</span><br/><span class="hl-0">            </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">lastPage</span><span class="hl-0"> = </span><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">this</span><span class="hl-0">.</span><span class="hl-7">getCustomData</span><span class="hl-0">(</span><span class="hl-2">lastPgURL</span><span class="hl-0">, </span><span class="hl-2">authToken</span><span class="hl-0">);</span><br/><span class="hl-0">            </span><span class="hl-8">// pass on token</span><br/><span class="hl-0">            </span><span class="hl-2">authToken</span><span class="hl-0"> = </span><span class="hl-2">lastPage</span><span class="hl-0">.</span><span class="hl-2">token</span><span class="hl-0">;</span><br/><span class="hl-0">            </span><span class="hl-8">// harvest bundle json</span><br/><span class="hl-0">            </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">lastBundle</span><span class="hl-0"> = </span><span class="hl-2">lastPage</span><span class="hl-0">.</span><span class="hl-2">response</span><span class="hl-0">?.</span><span class="hl-2">data</span><span class="hl-0">;</span><br/><span class="hl-0">        }</span><br/><span class="hl-0">        </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">nextPgURL</span><span class="hl-0"> = </span><span class="hl-2">bb</span><span class="hl-0">.</span><span class="hl-7">extractPageNavUrl</span><span class="hl-0">(</span><span class="hl-2">eobbundle</span><span class="hl-0">, </span><span class="hl-1">&quot;next&quot;</span><span class="hl-0">);</span><br/><span class="hl-0">        </span><span class="hl-4">if</span><span class="hl-0"> (</span><span class="hl-2">nextPgURL</span><span class="hl-0">) {</span><br/><span class="hl-0">            </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">nextPage</span><span class="hl-0"> = </span><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">this</span><span class="hl-0">.</span><span class="hl-7">getCustomData</span><span class="hl-0">(</span><span class="hl-2">nextPgURL</span><span class="hl-0">, </span><span class="hl-2">authToken</span><span class="hl-0">);</span><br/><span class="hl-0">            </span><span class="hl-8">// pass on token</span><br/><span class="hl-0">            </span><span class="hl-2">authToken</span><span class="hl-0"> = </span><span class="hl-2">nextPage</span><span class="hl-0">.</span><span class="hl-2">token</span><span class="hl-0">;</span><br/><span class="hl-0">            </span><span class="hl-8">// harvest bundle json</span><br/><span class="hl-0">            </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">nextBundle</span><span class="hl-0"> = </span><span class="hl-2">nextPage</span><span class="hl-0">.</span><span class="hl-2">response</span><span class="hl-0">?.</span><span class="hl-2">data</span><span class="hl-0">;</span><br/><span class="hl-0">        }</span><br/><span class="hl-0">        </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">prevPgURL</span><span class="hl-0"> = </span><span class="hl-2">bb</span><span class="hl-0">.</span><span class="hl-7">extractPageNavUrl</span><span class="hl-0">(</span><span class="hl-2">eobbundle</span><span class="hl-0">, </span><span class="hl-1">&quot;previous&quot;</span><span class="hl-0">);</span><br/><span class="hl-0">        </span><span class="hl-4">if</span><span class="hl-0"> (</span><span class="hl-2">prevPgURL</span><span class="hl-0">) {</span><br/><span class="hl-0">            </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">prevPage</span><span class="hl-0"> = </span><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-5">this</span><span class="hl-0">.</span><span class="hl-7">getCustomData</span><span class="hl-0">(</span><span class="hl-2">prevPgURL</span><span class="hl-0">, </span><span class="hl-2">authToken</span><span class="hl-0">);</span><br/><span class="hl-0">            </span><span class="hl-8">// pass on token</span><br/><span class="hl-0">            </span><span class="hl-2">authToken</span><span class="hl-0"> = </span><span class="hl-2">prevPage</span><span class="hl-0">.</span><span class="hl-2">token</span><span class="hl-0">;</span><br/><span class="hl-0">            </span><span class="hl-8">// harvest bundle json</span><br/><span class="hl-0">            </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">prevBundle</span><span class="hl-0"> = </span><span class="hl-2">prevPage</span><span class="hl-0">.</span><span class="hl-2">response</span><span class="hl-0">?.</span><span class="hl-2">data</span><span class="hl-0">;</span><br/><span class="hl-0">        }</span><br/><br/><span class="hl-0">        </span><span class="hl-8">// get all patient(s) by calling getPages - note this is trivial since there is only</span><br/><span class="hl-0">        </span><span class="hl-8">// 1 patient resource</span><br/><span class="hl-0">        </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">ptbundle</span><span class="hl-0"> = </span><span class="hl-2">patientResults</span><span class="hl-0">.</span><span class="hl-2">response</span><span class="hl-0">?.</span><span class="hl-2">data</span><span class="hl-0">;</span><br/><span class="hl-0">        </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">pts</span><span class="hl-0"> = </span><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-2">bb</span><span class="hl-0">.</span><span class="hl-7">getPages</span><span class="hl-0">(</span><span class="hl-2">ptbundle</span><span class="hl-0">, </span><span class="hl-2">authToken</span><span class="hl-0">);</span><br/><span class="hl-0">        </span><span class="hl-2">authToken</span><span class="hl-0"> = </span><span class="hl-2">pts</span><span class="hl-0">.</span><span class="hl-2">token</span><span class="hl-0">;</span><br/><br/><span class="hl-0">        </span><span class="hl-8">// get all coverages by calling getPages</span><br/><span class="hl-0">        </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">coveragebundle</span><span class="hl-0"> = </span><span class="hl-2">coverageResults</span><span class="hl-0">.</span><span class="hl-2">response</span><span class="hl-0">?.</span><span class="hl-2">data</span><span class="hl-0">;</span><br/><span class="hl-0">        </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">coverages</span><span class="hl-0"> = </span><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-2">bb</span><span class="hl-0">.</span><span class="hl-7">getPages</span><span class="hl-0">(</span><span class="hl-2">coveragebundle</span><span class="hl-0">, </span><span class="hl-2">authToken</span><span class="hl-0">);</span><br/><span class="hl-0">        </span><span class="hl-2">authToken</span><span class="hl-0"> = </span><span class="hl-2">coverages</span><span class="hl-0">.</span><span class="hl-2">token</span><span class="hl-0">;</span><br/><br/><span class="hl-0">        </span><span class="hl-8">// Note, getPages can be applied on non bundle resources or bundles without navigation links,</span><br/><span class="hl-0">        </span><span class="hl-8">// in that case, no page navigation occurs and a list of the original resource will be returned,</span><br/><span class="hl-0">        </span><span class="hl-8">// e.g. below code calls getPages on a profile result which might not be a bundle resource.</span><br/><span class="hl-0">        </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">pfbundle</span><span class="hl-0"> = </span><span class="hl-2">profileResults</span><span class="hl-0">.</span><span class="hl-2">response</span><span class="hl-0">?.</span><span class="hl-2">data</span><span class="hl-0">;</span><br/><span class="hl-0">        </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-6">pfs</span><span class="hl-0"> = </span><span class="hl-4">await</span><span class="hl-0"> </span><span class="hl-2">bb</span><span class="hl-0">.</span><span class="hl-7">getPages</span><span class="hl-0">(</span><span class="hl-2">pfbundle</span><span class="hl-0">, </span><span class="hl-2">authToken</span><span class="hl-0">);</span><br/><span class="hl-0">        </span><span class="hl-2">authToken</span><span class="hl-0"> = </span><span class="hl-2">pfs</span><span class="hl-0">.</span><span class="hl-2">token</span><span class="hl-0">;</span><br/><br/><span class="hl-0">        </span><span class="hl-8">// getPages return an object of structure:</span><br/><span class="hl-0">        </span><span class="hl-8">// {token: &lt;authToken&gt;, pages: [&lt;bundle of 10 resources&gt;, &lt;bundle of 10 resources&gt;, ...]}</span><br/><span class="hl-0">        </span><span class="hl-2">results</span><span class="hl-0"> = {</span><br/><span class="hl-0">          </span><span class="hl-2">eob:</span><span class="hl-0"> </span><span class="hl-2">eobs</span><span class="hl-0">.</span><span class="hl-2">pages</span><span class="hl-0">,</span><br/><span class="hl-0">          </span><span class="hl-2">patient:</span><span class="hl-0"> </span><span class="hl-2">pts</span><span class="hl-0">.</span><span class="hl-2">pages</span><span class="hl-0">,</span><br/><span class="hl-0">          </span><span class="hl-2">coverage:</span><span class="hl-0"> </span><span class="hl-2">coverages</span><span class="hl-0">.</span><span class="hl-2">pages</span><span class="hl-0">,</span><br/><span class="hl-0">          </span><span class="hl-2">profile:</span><span class="hl-0"> </span><span class="hl-2">pfs</span><span class="hl-0">.</span><span class="hl-2">pages</span><span class="hl-0">,</span><br/><span class="hl-0">        };</span><br/><br/><span class="hl-0">    } </span><span class="hl-4">catch</span><span class="hl-0"> (</span><span class="hl-2">e</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-7">log</span><span class="hl-0">(</span><span class="hl-2">e</span><span class="hl-0">);</span><br/><span class="hl-0">    }</span><br/><br/><span class="hl-0">    </span><span class="hl-2">res</span><span class="hl-0">.</span><span class="hl-7">json</span><span class="hl-0">(</span><span class="hl-2">results</span><span class="hl-0">)</span><br/><br/><span class="hl-0">});</span><br/>
</code></pre>

            <a
              href="#a-complete-sample-app-"
              id="a-complete-sample-app-"
              style="color: inherit; text-decoration: none"
            >
              <h2>A Complete Sample App <a name="samples"></a></h2>
            </a>
            <p>
              A Node JS React sample app can be found at:
              <a
                href="https://github.com/CMSgov/bluebutton-sample-client-nodejs-react"
                >CMS Blue Button Node JS Sample App</a
              >
            </p>

            <a
              href="#api-versions-and-environments-"
              id="api-versions-and-environments-"
              style="color: inherit; text-decoration: none"
            >
              <h2>
                API Versions and Environments
                <a name="versions_and_environments"></a>
              </h2>
            </a>
            <p>
              From two environments: PRODUCTION and SANDBOX, Blue Button API is
              available in v1 and v2, data served from v1 is in FHIR STU2
              format, and data from v2 is in FHIR R4 format, an
              application&#39;s target environment and API version can be set in
              the SDK configuration as shown by example below:
            </p>
            <pre><code><span class="hl-0">{</span><br/><span class="hl-0">  </span><span class="hl-1">&quot;clientId&quot;</span><span class="hl-0">: </span><span class="hl-1">&quot;foo&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-1">&quot;clientSecret&quot;</span><span class="hl-0">: </span><span class="hl-1">&quot;bar&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-1">&quot;callbackUrl&quot;</span><span class="hl-0">: </span><span class="hl-1">&quot;https://www.fake.com/&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-1">&quot;version&quot;</span><span class="hl-0">: </span><span class="hl-1">&quot;2&quot;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-1">&quot;environment&quot;</span><span class="hl-0">: </span><span class="hl-1">&quot;PRODUCTION&quot;</span><br/><span class="hl-0">}</span><br/>
</code></pre>
            <p>
              The default API version is v2, and default environment is SANDBOX.
            </p>
            <p>Web location of the environments:</p>
            <p>
              <a href="https://api.bluebutton.cms.gov"
                >PRODUCTION Environment: https://api.bluebutton.cms.gov</a
              >
            </p>
            <p>
              <a href="https://sandbox.bluebutton.cms.gov"
                >SANDBOX Environment: https://sandbox.bluebutton.cms.gov</a
              >
            </p>
          </div>
        </div>
        <div class="col-4 col-menu menu-sticky-wrap menu-highlight">
          <nav class="tsd-navigation primary">
            <ul>
              <li class="current"><a href="modules.html">Modules</a></li>
              <li class="tsd-kind-module">
                <a href="modules/auth.html">auth</a>
              </li>
              <li class="tsd-kind-module">
                <a href="modules/entities_AuthorizationToken.html"
                  >entities/<wbr />Authorization<wbr />Token</a
                >
              </li>
              <li class="tsd-kind-module">
                <a href="modules/enums_environments.html">enums/environments</a>
              </li>
              <li class="tsd-kind-module">
                <a href="modules/enums_errors.html">enums/errors</a>
              </li>
              <li class="tsd-kind-module">
                <a href="modules/index.html">index</a>
              </li>
              <li class="tsd-kind-module">
                <a href="modules/resource.html">resource</a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>
    <footer class="with-border-bottom">
      <div class="container">
        <h2>Legend</h2>
        <div class="tsd-legend-group">
          <ul class="tsd-legend">
            <li class="tsd-kind-variable">
              <span class="tsd-kind-icon">Variable</span>
            </li>
            <li class="tsd-kind-function">
              <span class="tsd-kind-icon">Function</span>
            </li>
            <li class="tsd-kind-type-alias">
              <span class="tsd-kind-icon">Type alias</span>
            </li>
          </ul>
          <ul class="tsd-legend">
            <li class="tsd-kind-enum">
              <span class="tsd-kind-icon">Enumeration</span>
            </li>
          </ul>
          <ul class="tsd-legend">
            <li class="tsd-kind-class">
              <span class="tsd-kind-icon">Class</span>
            </li>
          </ul>
        </div>
        <h2>Settings</h2>
        <p>
          Theme
          <select id="theme">
            <option value="os">OS</option>
            <option value="light">Light</option>
            <option value="dark">Dark</option>
          </select>
        </p>
      </div>
    </footer>
    <div class="container tsd-generator">
      <p>
        Generated using
        <a href="https://typedoc.org/" target="_blank">TypeDoc</a>
      </p>
    </div>
    <div class="overlay"></div>
    <script src="assets/main.js"></script>
  </body>
</html>
